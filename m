Return-Path: <linux-pm+bounces-4840-lists+linux-pm=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-pm@lfdr.de
Delivered-To: lists+linux-pm@lfdr.de
Received: from ny.mirrors.kernel.org (ny.mirrors.kernel.org [147.75.199.223])
	by mail.lfdr.de (Postfix) with ESMTPS id 2707F878D3D
	for <lists+linux-pm@lfdr.de>; Tue, 12 Mar 2024 03:56:50 +0100 (CET)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by ny.mirrors.kernel.org (Postfix) with ESMTPS id 494AA1C21A40
	for <lists+linux-pm@lfdr.de>; Tue, 12 Mar 2024 02:56:49 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 456338F5D;
	Tue, 12 Mar 2024 02:56:36 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (1024-bit key) header.d=panix.com header.i=@panix.com header.b="Z94/KClB"
X-Original-To: linux-pm@vger.kernel.org
Received: from l2mail1.panix.com (l2mail1.panix.com [166.84.1.75])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 9BC7CB65F
	for <linux-pm@vger.kernel.org>; Tue, 12 Mar 2024 02:56:31 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=166.84.1.75
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1710212196; cv=none; b=m1oiOuAZ4hFeg1EFSwXZJiPzvf49OfhltyCPB3la99fboh/3F0nPW0VyMMgKhyP0LRo3vumbTV+7VBkpvN3bo1x5TsIvaf24pClAxPEMtIoqxTCspeQYFG7HsMsOxgtE9c5AkMTNJY/f6ktMsxNT+H3BxLZJMl0qUeGBIuXeXXU=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1710212196; c=relaxed/simple;
	bh=+jf8UT/DrgVylsW0uL+Db9g34QeKLm+UhUOxA9HkUY0=;
	h=Date:From:To:Subject:In-Reply-To:Message-ID:References:
	 MIME-Version:Content-Type; b=rWWPO0kKNzBwh5NcumqEqr7bSVvJIOZkVyp2/u4vbR87XIPsM9Evwl4jxzm0s5WLd2ngC/AUARcyDcGlLFtSHndAL1YxfMxdd/8BndGC9fEhap2DLYEmI7gdGpm+40zS3CSS0e0rm8z/N4UaLbiIneK1CkyEL4PA0MMwRBsz5Yc=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=panix.com; spf=pass smtp.mailfrom=panix.com; dkim=pass (1024-bit key) header.d=panix.com header.i=@panix.com header.b=Z94/KClB; arc=none smtp.client-ip=166.84.1.75
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=panix.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=panix.com
Received: from mailbackend.panix.com (mailbackend.panix.com [166.84.1.89])
	(using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
	 key-exchange X25519 server-signature RSA-PSS (1024 bits) server-digest SHA256)
	(No client certificate requested)
	by l2mail1.panix.com (Postfix) with ESMTPS id 4TtyTl3TyDzDWT
	for <linux-pm@vger.kernel.org>; Mon, 11 Mar 2024 22:37:15 -0400 (EDT)
Received: from xps-9320 (c-73-245-8-241.hsd1.fl.comcast.net [73.245.8.241])
	by mailbackend.panix.com (Postfix) with ESMTPSA id 4TtyTT4yx6zMXt;
	Mon, 11 Mar 2024 22:37:01 -0400 (EDT)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=panix.com; s=panix;
	t=1710211022; bh=+jf8UT/DrgVylsW0uL+Db9g34QeKLm+UhUOxA9HkUY0=;
	h=Date:From:Reply-To:To:Subject:In-Reply-To:References;
	b=Z94/KClBbCA+p0XssZ4QBzpvJ86lISD3gquwUlio1Zu9p88VRQkEcow6KDCWVLc3s
	 4L+OzdJZeoezdARVUeAx+4nj89dpZcKaMuAMjSPNKJXI4YHrs9vsfmlbtap+woPsQZ
	 uX/Z7iCu5rU8M6i333863dgo8LnfhyXiUUhEJlC8=
Date: Mon, 11 Mar 2024 19:37:00 -0700 (PDT)
From: "Kenneth R. Crudup" <kenny@panix.com>
Reply-To: "Kenneth R. Crudup" <kenny@panix.com>
To: vidyas@nvidia.com, bhelgaas@google.com, kai.heng.feng@canonical.com, 
    andrea.righi@canonical.com, vicamo.yang@canonical.com, 
    linux-pm@vger.kernel.org
Subject: Re: My AlderLake Dell (XPS-9320) needs these patches to get full
 standby/low-power modes
In-Reply-To: <218aa81f-9c6-5929-578d-8dc15f83dd48@panix.com>
Message-ID: <1c6a9a8c-a6f-c884-7d58-5c713b1d77d7@panix.com>
References: <218aa81f-9c6-5929-578d-8dc15f83dd48@panix.com>
Errors-To: kenny@panix.com
Precedence: bulk
X-Mailing-List: linux-pm@vger.kernel.org
List-Id: <linux-pm.vger.kernel.org>
List-Subscribe: <mailto:linux-pm+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-pm+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="8323329-1471136400-1710211022=:4781"

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

--8323329-1471136400-1710211022=:4781
Content-Type: text/plain; charset=US-ASCII


On Sat, 4 Nov 2023, Kenneth R. Crudup wrote:

> The only release kernel that was able to get this laptop to fully get into
> low-power (unfortunately only s0ix) was the Ubuntu-6.2.0- ... series from Ubuntu

> I'd bisected it to the following commits:
> 4ff116d0d5fd PCI/ASPM: Save L1 PM Substates Capability for suspend/resume
> 5e85eba6f50d PCI/ASPM: Refactor L1 PM Substates Control Register programming
> 1a0102a08f20 UBUNTU: SAUCE: PCI/ASPM: Enable ASPM for links under VMD domain
> 47c7bfd31514 UBUNTU: SAUCE: PCI/ASPM: Enable LTR for endpoints behind VMD
> 154d48da2c57 UBUNTU: SAUCE: vmd: fixup bridge ASPM by driver name instead

Since (for what I'm sure is a good reason ... I hope :) ) this has yet to make
it into mainline, here's the set of commits refactored for v6.8; maybe someone
scanning the archives for a solution to their Dell draining too much power can
use them.

But is there anything I can do to help these go in? I saw that "Refactor L1
PM Substates Control Register programming" is still reverted, is that still
an issue on the machine it affected?

	-Kenny

-- 
Kenneth R. Crudup / Sr. SW Engineer, Scott County Consulting, Orange County CA
--8323329-1471136400-1710211022=:4781
Content-Type: text/x-diff; name=0005-UBUNTU-SAUCE-vmd-fixup-bridge-ASPM-by-driver-name-in.patch
Content-Transfer-Encoding: BASE64
Content-Description: 
Content-Disposition: attachment; filename=0005-UBUNTU-SAUCE-vmd-fixup-bridge-ASPM-by-driver-name-in.patch

RnJvbSA2NDZhMTQ0NWU1OWFjMTMxMGFkNzFmZmQzNjYzMTYwODQzZTY2ZTIx
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQ0KRnJvbTogWW91LVNoZW5nIFlh
bmcgPHZpY2Ftby55YW5nQGNhbm9uaWNhbC5jb20+DQpEYXRlOiBNb24sIDEx
IEFwciAyMDIyIDE3OjI0OjM0ICswODAwDQpTdWJqZWN0OiBbUEFUQ0ggNS81
XSBVQlVOVFU6IFNBVUNFOiB2bWQ6IGZpeHVwIGJyaWRnZSBBU1BNIGJ5IGRy
aXZlciBuYW1lDQogaW5zdGVhZA0KDQpCdWdMaW5rOiBodHRwczovL2J1Z3Mu
bGF1bmNocGFkLm5ldC9idWdzLzE5NDIxNjANCg0KQWRkaXRpb25hbCBWTUQg
YnJpZGdlIElEcyBuZWVkZWQgZm9yIG5ldyBBbGRlciBMYWtlIHBsYXRmb3Jt
cywgYnV0DQphY3R1YWxseSB0aGVyZSBpcyBubyBhIGNvbXBsZXRlIGxpc3Qg
Zm9yIHRoZW0uIEhlcmUgd2UgbWF0Y2ggYnJpZGdlDQpkZXZpY2VzIGlmIHRo
ZXkncmUgZGlyZWN0bHkgYXR0YWNoZWQgdG8gYSBWTUQgY29udHJvbGxlciBp
bnN0ZWFkLg0KDQpTaWduZWQtb2ZmLWJ5OiBZb3UtU2hlbmcgWWFuZyA8dmlj
YW1vLnlhbmdAY2Fub25pY2FsLmNvbT4NClNpZ25lZC1vZmYtYnk6IEFuZHJl
YSBSaWdoaSA8YW5kcmVhLnJpZ2hpQGNhbm9uaWNhbC5jb20+DQooY2hlcnJ5
IHBpY2tlZCBmcm9tIGNvbW1pdCAxNTRkNDhkYTJjNTc1MTRlNGI1ZGFkYzdi
OGM3MGE0ZWRiNTUwOTgxKQ0KLS0tDQogZHJpdmVycy9wY2kvcXVpcmtzLmMg
fCAzMiArKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLQ0KIDEgZmls
ZSBjaGFuZ2VkLCAyMyBpbnNlcnRpb25zKCspLCA5IGRlbGV0aW9ucygtKQ0K
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9wY2kvcXVpcmtzLmMgYi9kcml2ZXJz
L3BjaS9xdWlya3MuYw0KaW5kZXggYjAwYjk5NmM3NDg1Li4xZjAzZDc3OTA3
ZjIgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL3BjaS9xdWlya3MuYw0KKysrIGIv
ZHJpdmVycy9wY2kvcXVpcmtzLmMNCkBAIC02MjUxLDIzICs2MjUxLDM2IEBA
IHN0YXRpYyB2b2lkIHBjaV9maXh1cF9kM2NvbGRfZGVsYXlfMXNlYyhzdHJ1
Y3QgcGNpX2RldiAqcGRldikNCiB9DQogREVDTEFSRV9QQ0lfRklYVVBfRklO
QUwoMHg1NTU1LCAweDAwMDQsIHBjaV9maXh1cF9kM2NvbGRfZGVsYXlfMXNl
Yyk7DQogLyoNCi0gKiBEZXZpY2UgWzgwODY6OWEwOV0sIFs4MDg2OmEwYjBd
IGFuZCBbODA4NjphMGJjXQ0KICAqIEJJT1MgbWF5IG5vdCBiZSBhYmxlIHRv
IGFjY2VzcyBjb25maWcgc3BhY2Ugb2YgZGV2aWNlcyB1bmRlciBWTUQgZG9t
YWluLCBzbw0KICAqIGl0IHJlbGllcyBvbiBzb2Z0d2FyZSB0byBlbmFibGUg
QVNQTSBmb3IgbGlua3MgdW5kZXIgVk1ELg0KICAqLw0KLXN0YXRpYyBjb25z
dCBzdHJ1Y3QgcGNpX2RldmljZV9pZCB2bWRfYnJpZGdlX3RibFtdID0gew0K
LQl7IFBDSV9WREVWSUNFKElOVEVMLCAweDlhMDkpIH0sDQotCXsgUENJX1ZE
RVZJQ0UoSU5URUwsIDB4YTBiMCkgfSwNCi0JeyBQQ0lfVkRFVklDRShJTlRF
TCwgMHhhMGJjKSB9LA0KLQl7IH0NCi19Ow0KK3N0YXRpYyBib29sIHBjaV9m
aXh1cF9pc192bWRfYnJpZGdlKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQ0KK3sN
CisJc3RydWN0IHBjaV9idXMgKmJ1cyA9IHBkZXYtPmJ1czsNCisJc3RydWN0
IGRldmljZSAqZGV2Ow0KKwlzdHJ1Y3QgcGNpX2RyaXZlciAqcGRydjsNCisN
CisJaWYgKCFwY2lfaXNfcm9vdF9idXMoYnVzKSkNCisJCXJldHVybiBmYWxz
ZTsNCisNCisJZGV2ID0gYnVzLT5icmlkZ2UtPnBhcmVudDsNCisJaWYgKGRl
diA9PSBOVUxMKQ0KKwkJcmV0dXJuIGZhbHNlOw0KKw0KKwlwZHJ2ID0gcGNp
X2Rldl9kcml2ZXIodG9fcGNpX2RldihkZXYpKTsNCisJaWYgKHBkcnYgPT0g
TlVMTCB8fCBzdHJjbXAoInZtZCIsIHBkcnYtPm5hbWUpKQ0KKwkJcmV0dXJu
IGZhbHNlOw0KKw0KKwlyZXR1cm4gdHJ1ZTsNCit9DQogDQogc3RhdGljIHZv
aWQgcGNpX2ZpeHVwX2VuYWJsZV9hc3BtKHN0cnVjdCBwY2lfZGV2ICpwZGV2
KQ0KIHsNCi0JaWYgKCFwY2lfbWF0Y2hfaWQodm1kX2JyaWRnZV90YmwsIHBk
ZXYpKQ0KKwlpZiAoIXBjaV9maXh1cF9pc192bWRfYnJpZGdlKHBkZXYpKQ0K
IAkJcmV0dXJuOw0KIA0KIAlwZGV2LT5kZXZfZmxhZ3MgfD0gUENJX0RFVl9G
TEFHU19FTkFCTEVfQVNQTTsNCisJcGNpX2luZm8ocGRldiwgImVuYWJsZSBB
U1BNIGZvciBwY2kgYnJpZGdlIGJlaGluZCB2bWQiKTsNCiB9DQogREVDTEFS
RV9QQ0lfRklYVVBfQ0xBU1NfSEVBREVSKFBDSV9WRU5ET1JfSURfSU5URUws
IFBDSV9BTllfSUQsDQogCQkJICAgICAgIFBDSV9DTEFTU19CUklER0VfUENJ
LCA4LCBwY2lfZml4dXBfZW5hYmxlX2FzcG0pOw0KQEAgLTYyODIsNyArNjI5
NSw3IEBAIHN0YXRpYyB2b2lkIHBjaV9maXh1cF9lbmFibGVfdm1kX252bWVf
bHRyKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQ0KIAlpZiAoIXBhcmVudCkNCiAJ
CXJldHVybjsNCiANCi0JaWYgKCFwY2lfbWF0Y2hfaWQodm1kX2JyaWRnZV90
YmwsIHBhcmVudCkpDQorCWlmICghcGNpX2ZpeHVwX2lzX3ZtZF9icmlkZ2Uo
cGFyZW50KSkNCiAJCXJldHVybjsNCiANCiAJcG9zID0gcGNpX2ZpbmRfZXh0
X2NhcGFiaWxpdHkocGRldiwgUENJX0VYVF9DQVBfSURfTFRSKTsNCkBAIC02
MzAwLDYgKzYzMTMsNyBAQCBzdGF0aWMgdm9pZCBwY2lfZml4dXBfZW5hYmxl
X3ZtZF9udm1lX2x0cihzdHJ1Y3QgcGNpX2RldiAqcGRldikNCiAJLyogMzE0
NTcyOG5zLCBpLmUuIDB4MzAwMDAwbnMgKi8NCiAJcGNpX3dyaXRlX2NvbmZp
Z193b3JkKHBkZXYsIHBvcyArIFBDSV9MVFJfTUFYX1NOT09QX0xBVCwgMHgx
MDAzKTsNCiAJcGNpX3dyaXRlX2NvbmZpZ193b3JkKHBkZXYsIHBvcyArIFBD
SV9MVFJfTUFYX05PU05PT1BfTEFULCAweDEwMDMpOw0KKwlwY2lfaW5mbyhw
ZGV2LCAiZW5hYmxlIExUUiBmb3IgbnZtZSBiZWhpbmQgdm1kIik7DQogfQ0K
IERFQ0xBUkVfUENJX0ZJWFVQX0NMQVNTX0VBUkxZKFBDSV9BTllfSUQsIFBD
SV9BTllfSUQsDQogCQkJICAgICAgUENJX0NMQVNTX1NUT1JBR0VfRVhQUkVT
UywgMCwgcGNpX2ZpeHVwX2VuYWJsZV92bWRfbnZtZV9sdHIpOw0KLS0gDQoy
LjM0LjENCg0K

--8323329-1471136400-1710211022=:4781
Content-Type: text/x-diff; name=0004-UBUNTU-SAUCE-PCI-ASPM-Enable-LTR-for-endpoints-behin.patch
Content-Transfer-Encoding: BASE64
Content-Description: 
Content-Disposition: attachment; filename=0004-UBUNTU-SAUCE-PCI-ASPM-Enable-LTR-for-endpoints-behin.patch

RnJvbSBhM2U2OTg4YmMxMTQxYzNkMWYwODVlMjc0ZDY4ZjVkNzJkZTZhNmIx
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQ0KRnJvbTogS2FpLUhlbmcgRmVu
ZyA8a2FpLmhlbmcuZmVuZ0BjYW5vbmljYWwuY29tPg0KRGF0ZTogTW9uLCAx
MSBBcHIgMjAyMiAxNzoyNDozMyArMDgwMA0KU3ViamVjdDogW1BBVENIIDQv
NV0gVUJVTlRVOiBTQVVDRTogUENJL0FTUE06IEVuYWJsZSBMVFIgZm9yIGVu
ZHBvaW50cyBiZWhpbmQNCiBWTUQNCg0KQnVnTGluazogaHR0cHM6Ly9idWdz
LmxhdW5jaHBhZC5uZXQvYnVncy8xOTQyMTYwDQoNCkluIGFkZGl0aW9uIHRv
IEFTUE0sIExUUiBhbHNvIG5lZWRzIHRvIGJlIHByb2dyYW1tZWQgd2l0aCBh
IHJlYXNvbmFibGUNCnZhbHVlIHRvIGxldCBQQ0llIGxpbmsgcmVhY2hlcyBM
MS4yLg0KDQpGb3Igbm93LCBwcm9ncmFtIGEgaGFyZGNvZGVkIHZhbHVlIHRo
YXQgaXMgdXNlZCB1bmRlciBXaW5kb3dzLg0KDQpXaGlsZSBhdCBpdCwgY29u
c29saWRhdGUgQVNQTSBhbmQgTFRSIGVuYWJsaW5nIGxvZ2ljIHRvIHNoYXJl
IGEgc2FtZSBwY2kNCmRldmljZSB0YWJsZS4NCg0KU2lnbmVkLW9mZi1ieTog
S2FpLUhlbmcgRmVuZyA8a2FpLmhlbmcuZmVuZ0BjYW5vbmljYWwuY29tPg0K
U2lnbmVkLW9mZi1ieTogQW5kcmVhIFJpZ2hpIDxhbmRyZWEucmlnaGlAY2Fu
b25pY2FsLmNvbT4NCihjaGVycnkgcGlja2VkIGZyb20gY29tbWl0IDQ3Yzdi
ZmQzMTUxNGU3YjU0YTFmODMwZjc3MDcyOTdhZWJiYjg2NzkpDQotLS0NCiBk
cml2ZXJzL3BjaS9xdWlya3MuYyB8IDQ4ICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrLS0tDQogMSBmaWxlIGNoYW5nZWQsIDQ1
IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQg
YS9kcml2ZXJzL3BjaS9xdWlya3MuYyBiL2RyaXZlcnMvcGNpL3F1aXJrcy5j
DQppbmRleCBhNTAxNzQ2MTljMjAuLmIwMGI5OTZjNzQ4NSAxMDA2NDQNCi0t
LSBhL2RyaXZlcnMvcGNpL3F1aXJrcy5jDQorKysgYi9kcml2ZXJzL3BjaS9x
dWlya3MuYw0KQEAgLTYyNTEsMTMgKzYyNTEsNTUgQEAgc3RhdGljIHZvaWQg
cGNpX2ZpeHVwX2QzY29sZF9kZWxheV8xc2VjKHN0cnVjdCBwY2lfZGV2ICpw
ZGV2KQ0KIH0NCiBERUNMQVJFX1BDSV9GSVhVUF9GSU5BTCgweDU1NTUsIDB4
MDAwNCwgcGNpX2ZpeHVwX2QzY29sZF9kZWxheV8xc2VjKTsNCiAvKg0KLSAq
IERldmljZSBbODA4Njo5YTA5XQ0KKyAqIERldmljZSBbODA4Njo5YTA5XSwg
WzgwODY6YTBiMF0gYW5kIFs4MDg2OmEwYmNdDQogICogQklPUyBtYXkgbm90
IGJlIGFibGUgdG8gYWNjZXNzIGNvbmZpZyBzcGFjZSBvZiBkZXZpY2VzIHVu
ZGVyIFZNRCBkb21haW4sIHNvDQogICogaXQgcmVsaWVzIG9uIHNvZnR3YXJl
IHRvIGVuYWJsZSBBU1BNIGZvciBsaW5rcyB1bmRlciBWTUQuDQogICovDQor
c3RhdGljIGNvbnN0IHN0cnVjdCBwY2lfZGV2aWNlX2lkIHZtZF9icmlkZ2Vf
dGJsW10gPSB7DQorCXsgUENJX1ZERVZJQ0UoSU5URUwsIDB4OWEwOSkgfSwN
CisJeyBQQ0lfVkRFVklDRShJTlRFTCwgMHhhMGIwKSB9LA0KKwl7IFBDSV9W
REVWSUNFKElOVEVMLCAweGEwYmMpIH0sDQorCXsgfQ0KK307DQorDQogc3Rh
dGljIHZvaWQgcGNpX2ZpeHVwX2VuYWJsZV9hc3BtKHN0cnVjdCBwY2lfZGV2
ICpwZGV2KQ0KIHsNCisJaWYgKCFwY2lfbWF0Y2hfaWQodm1kX2JyaWRnZV90
YmwsIHBkZXYpKQ0KKwkJcmV0dXJuOw0KKw0KIAlwZGV2LT5kZXZfZmxhZ3Mg
fD0gUENJX0RFVl9GTEFHU19FTkFCTEVfQVNQTTsNCiB9DQotREVDTEFSRV9Q
Q0lfRklYVVBfSEVBREVSKFBDSV9WRU5ET1JfSURfSU5URUwsIDB4OWEwOSwg
cGNpX2ZpeHVwX2VuYWJsZV9hc3BtKTsNCi1ERUNMQVJFX1BDSV9GSVhVUF9I
RUFERVIoUENJX1ZFTkRPUl9JRF9JTlRFTCwgMHhhMGIwLCBwY2lfZml4dXBf
ZW5hYmxlX2FzcG0pOw0KK0RFQ0xBUkVfUENJX0ZJWFVQX0NMQVNTX0hFQURF
UihQQ0lfVkVORE9SX0lEX0lOVEVMLCBQQ0lfQU5ZX0lELA0KKwkJCSAgICAg
ICBQQ0lfQ0xBU1NfQlJJREdFX1BDSSwgOCwgcGNpX2ZpeHVwX2VuYWJsZV9h
c3BtKTsNCisNCitzdGF0aWMgdm9pZCBwY2lfZml4dXBfZW5hYmxlX3ZtZF9u
dm1lX2x0cihzdHJ1Y3QgcGNpX2RldiAqcGRldikNCit7DQorCXN0cnVjdCBw
Y2lfZGV2ICpwYXJlbnQ7DQorCWludCBwb3M7DQorCXUxNiB2YWw7DQorDQor
CXBhcmVudCA9IHBjaV91cHN0cmVhbV9icmlkZ2UocGRldik7DQorCWlmICgh
cGFyZW50KQ0KKwkJcmV0dXJuOw0KKw0KKwlpZiAoIXBjaV9tYXRjaF9pZCh2
bWRfYnJpZGdlX3RibCwgcGFyZW50KSkNCisJCXJldHVybjsNCisNCisJcG9z
ID0gcGNpX2ZpbmRfZXh0X2NhcGFiaWxpdHkocGRldiwgUENJX0VYVF9DQVBf
SURfTFRSKTsNCisJaWYgKCFwb3MpDQorCQlyZXR1cm47DQorDQorCXBjaV9y
ZWFkX2NvbmZpZ193b3JkKHBkZXYsIHBvcyArIFBDSV9MVFJfTUFYX1NOT09Q
X0xBVCwgJnZhbCk7DQorCWlmICh2YWwpDQorCQlyZXR1cm47DQorDQorCXBj
aV9yZWFkX2NvbmZpZ193b3JkKHBkZXYsIHBvcyArIFBDSV9MVFJfTUFYX05P
U05PT1BfTEFULCAmdmFsKTsNCisJaWYgKHZhbCkNCisJCXJldHVybjsNCisN
CisJLyogMzE0NTcyOG5zLCBpLmUuIDB4MzAwMDAwbnMgKi8NCisJcGNpX3dy
aXRlX2NvbmZpZ193b3JkKHBkZXYsIHBvcyArIFBDSV9MVFJfTUFYX1NOT09Q
X0xBVCwgMHgxMDAzKTsNCisJcGNpX3dyaXRlX2NvbmZpZ193b3JkKHBkZXYs
IHBvcyArIFBDSV9MVFJfTUFYX05PU05PT1BfTEFULCAweDEwMDMpOw0KK30N
CitERUNMQVJFX1BDSV9GSVhVUF9DTEFTU19FQVJMWShQQ0lfQU5ZX0lELCBQ
Q0lfQU5ZX0lELA0KKwkJCSAgICAgIFBDSV9DTEFTU19TVE9SQUdFX0VYUFJF
U1MsIDAsIHBjaV9maXh1cF9lbmFibGVfdm1kX252bWVfbHRyKTsNCi0tIA0K
Mi4zNC4xDQoNCg==

--8323329-1471136400-1710211022=:4781
Content-Type: text/x-diff; name=0003-UBUNTU-SAUCE-PCI-ASPM-Enable-ASPM-for-links-under-VM.patch
Content-Transfer-Encoding: BASE64
Content-Description: 
Content-Disposition: attachment; filename=0003-UBUNTU-SAUCE-PCI-ASPM-Enable-ASPM-for-links-under-VM.patch

RnJvbSAwZmQxZDA0YTA5MzIwYmMwODU3YjNjY2QyNmE5NTliNzEyN2MxNTFj
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQ0KRnJvbTogS2FpLUhlbmcgRmVu
ZyA8a2FpLmhlbmcuZmVuZ0BjYW5vbmljYWwuY29tPg0KRGF0ZTogTW9uLCAx
MSBBcHIgMjAyMiAxNzoyNDozMiArMDgwMA0KU3ViamVjdDogW1BBVENIIDMv
NV0gVUJVTlRVOiBTQVVDRTogUENJL0FTUE06IEVuYWJsZSBBU1BNIGZvciBs
aW5rcyB1bmRlciBWTUQNCiBkb21haW4NCg0KQnVnTGluazogaHR0cHM6Ly9i
dWdzLmxhdW5jaHBhZC5uZXQvYnVncy8xOTQyMTYwDQoNCk5ldyBJbnRlbCBs
YXB0b3BzIHdpdGggVk1EIGNhbm5vdCByZWFjaCBkZWVwZXIgcG93ZXIgc2F2
aW5nIHN0YXRlLA0KcmVuZGVycyB2ZXJ5IHNob3J0IGJhdHRlcnkgdGltZS4N
Cg0KQXMgQklPUyBtYXkgbm90IGJlIGFibGUgdG8gcHJvZ3JhbSB0aGUgY29u
ZmlnIHNwYWNlIGZvciBkZXZpY2VzIHVuZGVyDQpWTUQgZG9tYWluLCBBU1BN
IG5lZWRzIHRvIGJlIHByb2dyYW1tZWQgbWFudWFsbHkgYnkgc29mdHdhcmUu
IFRoaXMgaXMNCmFsc28gdGhlIGNhc2UgdW5kZXIgV2luZG93cy4NCg0KVGhl
IFZNRCBjb250cm9sbGVyIGl0c2VsZiBpcyBhIHJvb3QgY29tcGxleCBpbnRl
Z3JhdGVkIGVuZHBvaW50IHRoYXQNCmRvZXNuJ3QgaGF2ZSBBU1BNIGNhcGFi
aWxpdHksIHNvIHdlIGNhbid0IHByb3BhZ2F0ZSB0aGUgQVNQTSBzZXR0aW5n
cyB0bw0KZGV2aWNlcyB1bmRlciBpdC4gSGVuY2UsIHNpbXBseSBhcHBseSBB
U1BNX1NUQVRFX0FMTCB0byB0aGUgbGlua3MgdW5kZXINClZNRCBkb21haW4s
IHVuc3VwcG9ydGVkIHN0YXRlcyB3aWxsIGJlIGNsZWFyZWQgb3V0IGFueXdh
eS4NCg0KU2lnbmVkLW9mZi1ieTogS2FpLUhlbmcgRmVuZyA8a2FpLmhlbmcu
ZmVuZ0BjYW5vbmljYWwuY29tPg0KU2lnbmVkLW9mZi1ieTogQW5kcmVhIFJp
Z2hpIDxhbmRyZWEucmlnaGlAY2Fub25pY2FsLmNvbT4NCihjaGVycnkgcGlj
a2VkIGZyb20gY29tbWl0IDFhMDEwMmEwOGYyMDYxNDlkOWFiZDU2YzJiMjg4
NzdjODc4YjU1MjYpDQotLS0NCiBkcml2ZXJzL3BjaS9wY2llL2FzcG0uYyB8
ICAzICsrLQ0KIGRyaXZlcnMvcGNpL3F1aXJrcy5jICAgIHwgMTEgKysrKysr
KysrKysNCiBpbmNsdWRlL2xpbnV4L3BjaS5oICAgICB8ICAyICsrDQogMyBm
aWxlcyBjaGFuZ2VkLCAxNSBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0p
DQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BjaS9wY2llL2FzcG0uYyBiL2Ry
aXZlcnMvcGNpL3BjaWUvYXNwbS5jDQppbmRleCA4NDBkYTViZTc2NWUuLjdh
ZmFiOTk1OWJlNiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvcGNpL3BjaWUvYXNw
bS5jDQorKysgYi9kcml2ZXJzL3BjaS9wY2llL2FzcG0uYw0KQEAgLTY0NSw3
ICs2NDUsOCBAQCBzdGF0aWMgdm9pZCBwY2llX2FzcG1fY2FwX2luaXQoc3Ry
dWN0IHBjaWVfbGlua19zdGF0ZSAqbGluaywgaW50IGJsYWNrbGlzdCkNCiAJ
YXNwbV9sMXNzX2luaXQobGluayk7DQogDQogCS8qIFNhdmUgZGVmYXVsdCBz
dGF0ZSAqLw0KLQlsaW5rLT5hc3BtX2RlZmF1bHQgPSBsaW5rLT5hc3BtX2Vu
YWJsZWQ7DQorCWxpbmstPmFzcG1fZGVmYXVsdCA9IHBhcmVudC0+ZGV2X2Zs
YWdzICYgUENJX0RFVl9GTEFHU19FTkFCTEVfQVNQTSA/DQorCQkJICAgICBB
U1BNX1NUQVRFX0FMTCA6IGxpbmstPmFzcG1fZW5hYmxlZDsNCiANCiAJLyog
U2V0dXAgaW5pdGlhbCBjYXBhYmxlIHN0YXRlLiBXaWxsIGJlIHVwZGF0ZWQg
bGF0ZXIgKi8NCiAJbGluay0+YXNwbV9jYXBhYmxlID0gbGluay0+YXNwbV9z
dXBwb3J0Ow0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvcGNpL3F1aXJrcy5jIGIv
ZHJpdmVycy9wY2kvcXVpcmtzLmMNCmluZGV4IGQ3OTdkZjZlNWYzZS4uYTUw
MTc0NjE5YzIwIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9wY2kvcXVpcmtzLmMN
CisrKyBiL2RyaXZlcnMvcGNpL3F1aXJrcy5jDQpAQCAtNjI1MCwzICs2MjUw
LDE0IEBAIHN0YXRpYyB2b2lkIHBjaV9maXh1cF9kM2NvbGRfZGVsYXlfMXNl
YyhzdHJ1Y3QgcGNpX2RldiAqcGRldikNCiAJcGRldi0+ZDNjb2xkX2RlbGF5
ID0gMTAwMDsNCiB9DQogREVDTEFSRV9QQ0lfRklYVVBfRklOQUwoMHg1NTU1
LCAweDAwMDQsIHBjaV9maXh1cF9kM2NvbGRfZGVsYXlfMXNlYyk7DQorLyoN
CisgKiBEZXZpY2UgWzgwODY6OWEwOV0NCisgKiBCSU9TIG1heSBub3QgYmUg
YWJsZSB0byBhY2Nlc3MgY29uZmlnIHNwYWNlIG9mIGRldmljZXMgdW5kZXIg
Vk1EIGRvbWFpbiwgc28NCisgKiBpdCByZWxpZXMgb24gc29mdHdhcmUgdG8g
ZW5hYmxlIEFTUE0gZm9yIGxpbmtzIHVuZGVyIFZNRC4NCisgKi8NCitzdGF0
aWMgdm9pZCBwY2lfZml4dXBfZW5hYmxlX2FzcG0oc3RydWN0IHBjaV9kZXYg
KnBkZXYpDQorew0KKwlwZGV2LT5kZXZfZmxhZ3MgfD0gUENJX0RFVl9GTEFH
U19FTkFCTEVfQVNQTTsNCit9DQorREVDTEFSRV9QQ0lfRklYVVBfSEVBREVS
KFBDSV9WRU5ET1JfSURfSU5URUwsIDB4OWEwOSwgcGNpX2ZpeHVwX2VuYWJs
ZV9hc3BtKTsNCitERUNMQVJFX1BDSV9GSVhVUF9IRUFERVIoUENJX1ZFTkRP
Ul9JRF9JTlRFTCwgMHhhMGIwLCBwY2lfZml4dXBfZW5hYmxlX2FzcG0pOw0K
ZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvcGNpLmggYi9pbmNsdWRlL2xp
bnV4L3BjaS5oDQppbmRleCA3YWIwZDEzNjcyZGEuLjU5YTQxNzdjZWRkYyAx
MDA2NDQNCi0tLSBhL2luY2x1ZGUvbGludXgvcGNpLmgNCisrKyBiL2luY2x1
ZGUvbGludXgvcGNpLmgNCkBAIC0yNDUsNiArMjQ1LDggQEAgZW51bSBwY2lf
ZGV2X2ZsYWdzIHsNCiAJUENJX0RFVl9GTEFHU19OT19SRUxBWEVEX09SREVS
SU5HID0gKF9fZm9yY2UgcGNpX2Rldl9mbGFnc190KSAoMSA8PCAxMSksDQog
CS8qIERldmljZSBkb2VzIGhvbm9yIE1TSSBtYXNraW5nIGRlc3BpdGUgc2F5
aW5nIG90aGVyd2lzZSAqLw0KIAlQQ0lfREVWX0ZMQUdTX0hBU19NU0lfTUFT
S0lORyA9IChfX2ZvcmNlIHBjaV9kZXZfZmxhZ3NfdCkgKDEgPDwgMTIpLA0K
KwkvKiBFbmFibGUgQVNQTSByZWdhcmRsZXNzIG9mIGhvdyBMbmtDdGwgaXMg
cHJvZ3JhbW1lZCAqLw0KKwlQQ0lfREVWX0ZMQUdTX0VOQUJMRV9BU1BNID0g
KF9fZm9yY2UgcGNpX2Rldl9mbGFnc190KSAoMSA8PCAxMyksDQogfTsNCiAN
CiBlbnVtIHBjaV9pcnFfcmVyb3V0ZV92YXJpYW50IHsNCi0tIA0KMi4zNC4x
DQoNCg==

--8323329-1471136400-1710211022=:4781
Content-Type: text/x-diff; name=0002-PCI-ASPM-Save-L1-PM-Substates-Capability-for-suspend.patch
Content-Transfer-Encoding: BASE64
Content-Description: 
Content-Disposition: attachment; filename=0002-PCI-ASPM-Save-L1-PM-Substates-Capability-for-suspend.patch

RnJvbSAzNjVlYWQ4NTY1ODk3ODM2M2RhMjQ2NzIxMjY0N2E1MTA5YzA5M2Y4
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQ0KRnJvbTogVmlkeWEgU2FnYXIg
PHZpZHlhc0BudmlkaWEuY29tPg0KRGF0ZTogVHVlLCAxMyBTZXAgMjAyMiAx
ODo0ODoyMiArMDUzMA0KU3ViamVjdDogW1BBVENIIDIvNV0gUENJL0FTUE06
IFNhdmUgTDEgUE0gU3Vic3RhdGVzIENhcGFiaWxpdHkgZm9yDQogc3VzcGVu
ZC9yZXN1bWUNCg0KUHJldmlvdXNseSB0aGUgTDEgUE0gU3Vic3RhdGVzIENv
bnRyb2wgUmVnaXN0ZXJzIChDVEwxIGFuZCBDVEwyKSB3ZXJlbid0DQpzYXZl
ZCBhbmQgcmVzdG9yZWQgZHVyaW5nIHN1c3BlbmQvcmVzdW1lIGxlYWRpbmcg
dG8gdGhlIEwxIFBNIFN1YnN0YXRlcw0KY29uZmlndXJhdGlvbiBiZWluZyBs
b3N0IHBvc3QtcmVzdW1lLg0KDQpTYXZlIHRoZSBMMSBQTSBTdWJzdGF0ZXMg
Q29udHJvbCBSZWdpc3RlcnMgc28gdGhhdCB0aGUgY29uZmlndXJhdGlvbiBp
cw0KcmV0YWluZWQgcG9zdC1yZXN1bWUuDQoNCltiaGVsZ2FhczogZHJvcCBw
Y2lfaXNfcGNpZSgpIHRlc3Rpbmc7IHdlIGNhbiByZWx5IG9uIHBjaV9jb25m
aWd1cmVfbHRyKCkNCmhhdmluZyBhbHJlYWR5IGRvbmUgdGhhdF0NCkxpbms6
IGh0dHBzOi8vbG9yZS5rZXJuZWwub3JnL3IvMjAyMjA5MTMxMzE4MjIuMTY1
NTctMy12aWR5YXNAbnZpZGlhLmNvbQ0KU2lnbmVkLW9mZi1ieTogVmlkeWEg
U2FnYXIgPHZpZHlhc0BudmlkaWEuY29tPg0KU2lnbmVkLW9mZi1ieTogQmpv
cm4gSGVsZ2FhcyA8YmhlbGdhYXNAZ29vZ2xlLmNvbT4NCihjaGVycnkgcGlj
a2VkIGZyb20gY29tbWl0IDRmZjExNmQwZDVmZDhhMDI1NjA0YjA4MDJkOTNh
MmQ1ZjRlNDY1ZDEpDQotLS0NCiBkcml2ZXJzL3BjaS9wY2kuYyAgICAgICB8
ICA3ICsrKysrKysNCiBkcml2ZXJzL3BjaS9wY2kuaCAgICAgICB8ICA0ICsr
KysNCiBkcml2ZXJzL3BjaS9wY2llL2FzcG0uYyB8IDM3ICsrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysNCiAzIGZpbGVzIGNoYW5nZWQs
IDQ4IGluc2VydGlvbnMoKykNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvcGNp
L3BjaS5jIGIvZHJpdmVycy9wY2kvcGNpLmMNCmluZGV4IGMzNTg1MjI5YzEy
YS4uYjgwZTJhM2EwODVkIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9wY2kvcGNp
LmMNCisrKyBiL2RyaXZlcnMvcGNpL3BjaS5jDQpAQCAtMTc5OCw2ICsxNzk4
LDcgQEAgaW50IHBjaV9zYXZlX3N0YXRlKHN0cnVjdCBwY2lfZGV2ICpkZXYp
DQogCQlyZXR1cm4gaTsNCiANCiAJcGNpX3NhdmVfbHRyX3N0YXRlKGRldik7
DQorCXBjaV9zYXZlX2FzcG1fbDFzc19zdGF0ZShkZXYpOw0KIAlwY2lfc2F2
ZV9kcGNfc3RhdGUoZGV2KTsNCiAJcGNpX3NhdmVfYWVyX3N0YXRlKGRldik7
DQogCXBjaV9zYXZlX3B0bV9zdGF0ZShkZXYpOw0KQEAgLTE5MDMsNiArMTkw
NCw3IEBAIHZvaWQgcGNpX3Jlc3RvcmVfc3RhdGUoc3RydWN0IHBjaV9kZXYg
KmRldikNCiAJICogTFRSIGl0c2VsZiAoaW4gdGhlIFBDSWUgY2FwYWJpbGl0
eSkuDQogCSAqLw0KIAlwY2lfcmVzdG9yZV9sdHJfc3RhdGUoZGV2KTsNCisJ
cGNpX3Jlc3RvcmVfYXNwbV9sMXNzX3N0YXRlKGRldik7DQogDQogCXBjaV9y
ZXN0b3JlX3BjaWVfc3RhdGUoZGV2KTsNCiAJcGNpX3Jlc3RvcmVfcGFzaWRf
c3RhdGUoZGV2KTsNCkBAIC0zNjEzLDYgKzM2MTUsMTEgQEAgdm9pZCBwY2lf
YWxsb2NhdGVfY2FwX3NhdmVfYnVmZmVycyhzdHJ1Y3QgcGNpX2RldiAqZGV2
KQ0KIAlpZiAoZXJyb3IpDQogCQlwY2lfZXJyKGRldiwgInVuYWJsZSB0byBh
bGxvY2F0ZSBzdXNwZW5kIGJ1ZmZlciBmb3IgTFRSXG4iKTsNCiANCisJZXJy
b3IgPSBwY2lfYWRkX2V4dF9jYXBfc2F2ZV9idWZmZXIoZGV2LCBQQ0lfRVhU
X0NBUF9JRF9MMVNTLA0KKwkJCQkJICAgIDIgKiBzaXplb2YodTMyKSk7DQor
CWlmIChlcnJvcikNCisJCXBjaV9lcnIoZGV2LCAidW5hYmxlIHRvIGFsbG9j
YXRlIHN1c3BlbmQgYnVmZmVyIGZvciBBU1BNLUwxU1NcbiIpOw0KKw0KIAlw
Y2lfYWxsb2NhdGVfdmNfc2F2ZV9idWZmZXJzKGRldik7DQogfQ0KIA0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvcGNpL3BjaS5oIGIvZHJpdmVycy9wY2kvcGNp
LmgNCmluZGV4IGU5NzUwYjFiMTliYS4uNWViNjVmMDNiNWU4IDEwMDY0NA0K
LS0tIGEvZHJpdmVycy9wY2kvcGNpLmgNCisrKyBiL2RyaXZlcnMvcGNpL3Bj
aS5oDQpAQCAtNTczLDExICs1NzMsMTUgQEAgdm9pZCBwY2llX2FzcG1faW5p
dF9saW5rX3N0YXRlKHN0cnVjdCBwY2lfZGV2ICpwZGV2KTsNCiB2b2lkIHBj
aWVfYXNwbV9leGl0X2xpbmtfc3RhdGUoc3RydWN0IHBjaV9kZXYgKnBkZXYp
Ow0KIHZvaWQgcGNpZV9hc3BtX3BtX3N0YXRlX2NoYW5nZShzdHJ1Y3QgcGNp
X2RldiAqcGRldiwgYm9vbCBsb2NrZWQpOw0KIHZvaWQgcGNpZV9hc3BtX3Bv
d2Vyc2F2ZV9jb25maWdfbGluayhzdHJ1Y3QgcGNpX2RldiAqcGRldik7DQor
dm9pZCBwY2lfc2F2ZV9hc3BtX2wxc3Nfc3RhdGUoc3RydWN0IHBjaV9kZXYg
KmRldik7DQordm9pZCBwY2lfcmVzdG9yZV9hc3BtX2wxc3Nfc3RhdGUoc3Ry
dWN0IHBjaV9kZXYgKmRldik7DQogI2Vsc2UNCiBzdGF0aWMgaW5saW5lIHZv
aWQgcGNpZV9hc3BtX2luaXRfbGlua19zdGF0ZShzdHJ1Y3QgcGNpX2RldiAq
cGRldikgeyB9DQogc3RhdGljIGlubGluZSB2b2lkIHBjaWVfYXNwbV9leGl0
X2xpbmtfc3RhdGUoc3RydWN0IHBjaV9kZXYgKnBkZXYpIHsgfQ0KIHN0YXRp
YyBpbmxpbmUgdm9pZCBwY2llX2FzcG1fcG1fc3RhdGVfY2hhbmdlKHN0cnVj
dCBwY2lfZGV2ICpwZGV2LCBib29sIGxvY2tlZCkgeyB9DQogc3RhdGljIGlu
bGluZSB2b2lkIHBjaWVfYXNwbV9wb3dlcnNhdmVfY29uZmlnX2xpbmsoc3Ry
dWN0IHBjaV9kZXYgKnBkZXYpIHsgfQ0KK3N0YXRpYyBpbmxpbmUgdm9pZCBw
Y2lfc2F2ZV9hc3BtX2wxc3Nfc3RhdGUoc3RydWN0IHBjaV9kZXYgKmRldikg
eyB9DQorc3RhdGljIGlubGluZSB2b2lkIHBjaV9yZXN0b3JlX2FzcG1fbDFz
c19zdGF0ZShzdHJ1Y3QgcGNpX2RldiAqZGV2KSB7IH0NCiAjZW5kaWYNCiAN
CiAjaWZkZWYgQ09ORklHX1BDSUVfRUNSQw0KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvcGNpL3BjaWUvYXNwbS5jIGIvZHJpdmVycy9wY2kvcGNpZS9hc3BtLmMN
CmluZGV4IDcxOGUwNTY5MzIxYy4uODQwZGE1YmU3NjVlIDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9wY2kvcGNpZS9hc3BtLmMNCisrKyBiL2RyaXZlcnMvcGNp
L3BjaWUvYXNwbS5jDQpAQCAtNzE0LDYgKzcxNCw0MyBAQCBzdGF0aWMgdm9p
ZCBwY2llX2NvbmZpZ19hc3BtX2wxc3Moc3RydWN0IHBjaWVfbGlua19zdGF0
ZSAqbGluaywgdTMyIHN0YXRlKQ0KIAkJCQkgICAgICAgUENJX0wxU1NfQ1RM
MV9MMVNTX01BU0ssIHZhbCk7DQogfQ0KIA0KK3ZvaWQgcGNpX3NhdmVfYXNw
bV9sMXNzX3N0YXRlKHN0cnVjdCBwY2lfZGV2ICpkZXYpDQorew0KKwlzdHJ1
Y3QgcGNpX2NhcF9zYXZlZF9zdGF0ZSAqc2F2ZV9zdGF0ZTsNCisJdTE2IGwx
c3MgPSBkZXYtPmwxc3M7DQorCXUzMiAqY2FwOw0KKw0KKwlpZiAoIWwxc3Mp
DQorCQlyZXR1cm47DQorDQorCXNhdmVfc3RhdGUgPSBwY2lfZmluZF9zYXZl
ZF9leHRfY2FwKGRldiwgUENJX0VYVF9DQVBfSURfTDFTUyk7DQorCWlmICgh
c2F2ZV9zdGF0ZSkNCisJCXJldHVybjsNCisNCisJY2FwID0gKHUzMiAqKSZz
YXZlX3N0YXRlLT5jYXAuZGF0YVswXTsNCisJcGNpX3JlYWRfY29uZmlnX2R3
b3JkKGRldiwgbDFzcyArIFBDSV9MMVNTX0NUTDIsIGNhcCsrKTsNCisJcGNp
X3JlYWRfY29uZmlnX2R3b3JkKGRldiwgbDFzcyArIFBDSV9MMVNTX0NUTDEs
IGNhcCsrKTsNCit9DQorDQordm9pZCBwY2lfcmVzdG9yZV9hc3BtX2wxc3Nf
c3RhdGUoc3RydWN0IHBjaV9kZXYgKmRldikNCit7DQorCXN0cnVjdCBwY2lf
Y2FwX3NhdmVkX3N0YXRlICpzYXZlX3N0YXRlOw0KKwl1MzIgKmNhcCwgY3Rs
MSwgY3RsMjsNCisJdTE2IGwxc3MgPSBkZXYtPmwxc3M7DQorDQorCWlmICgh
bDFzcykNCisJCXJldHVybjsNCisNCisJc2F2ZV9zdGF0ZSA9IHBjaV9maW5k
X3NhdmVkX2V4dF9jYXAoZGV2LCBQQ0lfRVhUX0NBUF9JRF9MMVNTKTsNCisJ
aWYgKCFzYXZlX3N0YXRlKQ0KKwkJcmV0dXJuOw0KKw0KKwljYXAgPSAodTMy
ICopJnNhdmVfc3RhdGUtPmNhcC5kYXRhWzBdOw0KKwljdGwyID0gKmNhcCsr
Ow0KKwljdGwxID0gKmNhcDsNCisJYXNwbV9wcm9ncmFtX2wxc3MoZGV2LCBj
dGwxLCBjdGwyKTsNCit9DQorDQogc3RhdGljIHZvaWQgcGNpZV9jb25maWdf
YXNwbV9kZXYoc3RydWN0IHBjaV9kZXYgKnBkZXYsIHUzMiB2YWwpDQogew0K
IAlwY2llX2NhcGFiaWxpdHlfY2xlYXJfYW5kX3NldF93b3JkKHBkZXYsIFBD
SV9FWFBfTE5LQ1RMLA0KLS0gDQoyLjM0LjENCg0K

--8323329-1471136400-1710211022=:4781
Content-Type: text/x-diff; name=0001-PCI-ASPM-Refactor-L1-PM-Substates-Control-Register-p.patch
Content-Transfer-Encoding: BASE64
Content-Description: 
Content-Disposition: attachment; filename=0001-PCI-ASPM-Refactor-L1-PM-Substates-Control-Register-p.patch

RnJvbSA3ODYwNmUzOTJhMWFlMmIyZWE4MjVjMjYzZjY4Yzc5ZDNjMDA5NDdk
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQ0KRnJvbTogVmlkeWEgU2FnYXIg
PHZpZHlhc0BudmlkaWEuY29tPg0KRGF0ZTogVHVlLCAxMyBTZXAgMjAyMiAx
ODo0ODoyMSArMDUzMA0KU3ViamVjdDogW1BBVENIIDEvNV0gUENJL0FTUE06
IFJlZmFjdG9yIEwxIFBNIFN1YnN0YXRlcyBDb250cm9sIFJlZ2lzdGVyDQog
cHJvZ3JhbW1pbmcNCg0KUmVmYWN0b3IgdGhlIGNvZGUgdG8gZXh0cmFjdCB0
aGUgY29tbW9uIGNvZGUgdG8gcHJvZ3JhbSBDb250cm9sDQpSZWdpc3RlcnMg
MSBhbmQgMiBvZiB0aGUgTDEgUE0gU3Vic3RhdGVzIGNhcGFiaWxpdHkgdG8g
YSBuZXcgZnVuY3Rpb24NCmFzcG1fcHJvZ3JhbV9sMXNzKCkgYW5kIGNhbGwg
aXQgZm9yIGJvdGggcGFyZW50IGFuZCBjaGlsZCBkZXZpY2VzLg0KDQpbYmhl
bGdhYXM6IHNxdWFzaCBpbiB1cGRhdGUgdG8gcHJlc2VydmUgZmllbGRzIHdl
J3JlIG5vdCB1cGRhdGluZyBmcm9tDQpodHRwczovL2xvcmUua2VybmVsLm9y
Zy9yLzM2ZmExM2M1LWUwZjgtMDIyZi03N2Y3LTc5MDhlNGRmOThiOEBudmlk
aWEuY29tXQ0KTGluazogaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcvci8yMDIy
MDkxMzEzMTgyMi4xNjU1Ny0yLXZpZHlhc0BudmlkaWEuY29tDQpTaWduZWQt
b2ZmLWJ5OiBWaWR5YSBTYWdhciA8dmlkeWFzQG52aWRpYS5jb20+DQpTaWdu
ZWQtb2ZmLWJ5OiBCam9ybiBIZWxnYWFzIDxiaGVsZ2Fhc0Bnb29nbGUuY29t
Pg0KKGNoZXJyeSBwaWNrZWQgZnJvbSBjb21taXQgNWU4NWViYTZmNTBkYzI4
OGMyMjA4M2E3ZTIxMzE1MmJjYzRiODIwOCkNCi0tLQ0KIGRyaXZlcnMvcGNp
L3BjaWUvYXNwbS5jIHwgODAgKysrKysrKysrKysrKysrKysrKystLS0tLS0t
LS0tLS0tLS0tLS0tLS0NCiAxIGZpbGUgY2hhbmdlZCwgNDAgaW5zZXJ0aW9u
cygrKSwgNDAgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJz
L3BjaS9wY2llL2FzcG0uYyBiL2RyaXZlcnMvcGNpL3BjaWUvYXNwbS5jDQpp
bmRleCBiYzBiZDg2Njk1ZWMuLjcxOGUwNTY5MzIxYyAxMDA2NDQNCi0tLSBh
L2RyaXZlcnMvcGNpL3BjaWUvYXNwbS5jDQorKysgYi9kcml2ZXJzL3BjaS9w
Y2llL2FzcG0uYw0KQEAgLTQyNiw2ICs0MjYsMzEgQEAgc3RhdGljIHZvaWQg
cGNpZV9hc3BtX2NoZWNrX2xhdGVuY3koc3RydWN0IHBjaV9kZXYgKmVuZHBv
aW50KQ0KIAl9DQogfQ0KIA0KK3N0YXRpYyB2b2lkIGFzcG1fcHJvZ3JhbV9s
MXNzKHN0cnVjdCBwY2lfZGV2ICpkZXYsIHUzMiBjdGwxLCB1MzIgY3RsMikN
Cit7DQorCXUxNiBsMXNzID0gZGV2LT5sMXNzOw0KKwl1MzIgbDFfMl9lbmFi
bGU7DQorDQorCS8qDQorCSAqIFBlciBQQ0llIHI2LjAsIHNlYyA1LjUuNCwg
VF9QT1dFUl9PTiBpbiBQQ0lfTDFTU19DVEwyIG11c3QgYmUNCisJICogcHJv
Z3JhbW1lZCBwcmlvciB0byBzZXR0aW5nIHRoZSBMMS4yIGVuYWJsZSBiaXRz
IGluIFBDSV9MMVNTX0NUTDEuDQorCSAqLw0KKwlwY2lfd3JpdGVfY29uZmln
X2R3b3JkKGRldiwgbDFzcyArIFBDSV9MMVNTX0NUTDIsIGN0bDIpOw0KKw0K
KwkvKg0KKwkgKiBJbiBhZGRpdGlvbiwgQ29tbW9uX01vZGVfUmVzdG9yZV9U
aW1lIGFuZCBMVFJfTDEuMl9USFJFU0hPTEQgaW4NCisJICogUENJX0wxU1Nf
Q1RMMSBtdXN0IGJlIHByb2dyYW1tZWQgKmJlZm9yZSogc2V0dGluZyB0aGUg
TDEuMg0KKwkgKiBlbmFibGUgYml0cywgZXZlbiB0aG91Z2ggdGhleSdyZSBh
bGwgaW4gUENJX0wxU1NfQ1RMMS4NCisJICovDQorCWwxXzJfZW5hYmxlID0g
Y3RsMSAmIFBDSV9MMVNTX0NUTDFfTDFfMl9NQVNLOw0KKwljdGwxICY9IH5Q
Q0lfTDFTU19DVEwxX0wxXzJfTUFTSzsNCisNCisJcGNpX3dyaXRlX2NvbmZp
Z19kd29yZChkZXYsIGwxc3MgKyBQQ0lfTDFTU19DVEwxLCBjdGwxKTsNCisJ
aWYgKGwxXzJfZW5hYmxlKQ0KKwkJcGNpX3dyaXRlX2NvbmZpZ19kd29yZChk
ZXYsIGwxc3MgKyBQQ0lfTDFTU19DVEwxLA0KKwkJCQkgICAgICAgY3RsMSB8
IGwxXzJfZW5hYmxlKTsNCit9DQorDQogLyogQ2FsY3VsYXRlIEwxLjIgUE0g
c3Vic3RhdGUgdGltaW5nIHBhcmFtZXRlcnMgKi8NCiBzdGF0aWMgdm9pZCBh
c3BtX2NhbGNfbDEyX2luZm8oc3RydWN0IHBjaWVfbGlua19zdGF0ZSAqbGlu
aywNCiAJCQkJdTMyIHBhcmVudF9sMXNzX2NhcCwgdTMyIGNoaWxkX2wxc3Nf
Y2FwKQ0KQEAgLTQzNSw3ICs0NjAsNiBAQCBzdGF0aWMgdm9pZCBhc3BtX2Nh
bGNfbDEyX2luZm8oc3RydWN0IHBjaWVfbGlua19zdGF0ZSAqbGluaywNCiAJ
dTMyIHRfY29tbW9uX21vZGUsIHRfcG93ZXJfb24sIGwxXzJfdGhyZXNob2xk
LCBzY2FsZSwgdmFsdWU7DQogCXUzMiBjdGwxID0gMCwgY3RsMiA9IDA7DQog
CXUzMiBwY3RsMSwgcGN0bDIsIGNjdGwxLCBjY3RsMjsNCi0JdTMyIHBsMV8y
X2VuYWJsZXMsIGNsMV8yX2VuYWJsZXM7DQogDQogCS8qIENob29zZSB0aGUg
Z3JlYXRlciBvZiB0aGUgdHdvIFBvcnQgQ29tbW9uX01vZGVfUmVzdG9yZV9U
aW1lcyAqLw0KIAl2YWwxID0gRklFTERfR0VUKFBDSV9MMVNTX0NBUF9DTV9S
RVNUT1JFX1RJTUUsIHBhcmVudF9sMXNzX2NhcCk7DQpAQCAtNDg1LDQ1ICs1
MDksMjEgQEAgc3RhdGljIHZvaWQgYXNwbV9jYWxjX2wxMl9pbmZvKHN0cnVj
dCBwY2llX2xpbmtfc3RhdGUgKmxpbmssDQogCSAgICBjdGwyID09IHBjdGwy
ICYmIGN0bDIgPT0gY2N0bDIpDQogCQlyZXR1cm47DQogDQotCS8qIERpc2Fi
bGUgTDEuMiB3aGlsZSB1cGRhdGluZy4gIFNlZSBQQ0llIHI1LjAsIHNlYyA1
LjUuNCwgNy44LjMuMyAqLw0KLQlwbDFfMl9lbmFibGVzID0gcGN0bDEgJiBQ
Q0lfTDFTU19DVEwxX0wxXzJfTUFTSzsNCi0JY2wxXzJfZW5hYmxlcyA9IGNj
dGwxICYgUENJX0wxU1NfQ1RMMV9MMV8yX01BU0s7DQotDQotCWlmIChwbDFf
Ml9lbmFibGVzIHx8IGNsMV8yX2VuYWJsZXMpIHsNCi0JCXBjaV9jbGVhcl9h
bmRfc2V0X2NvbmZpZ19kd29yZChjaGlsZCwNCi0JCQkJCSAgICAgICBjaGls
ZC0+bDFzcyArIFBDSV9MMVNTX0NUTDEsDQotCQkJCQkgICAgICAgUENJX0wx
U1NfQ1RMMV9MMV8yX01BU0ssIDApOw0KLQkJcGNpX2NsZWFyX2FuZF9zZXRf
Y29uZmlnX2R3b3JkKHBhcmVudCwNCi0JCQkJCSAgICAgICBwYXJlbnQtPmwx
c3MgKyBQQ0lfTDFTU19DVEwxLA0KLQkJCQkJICAgICAgIFBDSV9MMVNTX0NU
TDFfTDFfMl9NQVNLLCAwKTsNCi0JfQ0KLQ0KLQkvKiBQcm9ncmFtIFRfUE9X
RVJfT04gdGltZXMgaW4gYm90aCBwb3J0cyAqLw0KLQlwY2lfd3JpdGVfY29u
ZmlnX2R3b3JkKHBhcmVudCwgcGFyZW50LT5sMXNzICsgUENJX0wxU1NfQ1RM
MiwgY3RsMik7DQotCXBjaV93cml0ZV9jb25maWdfZHdvcmQoY2hpbGQsIGNo
aWxkLT5sMXNzICsgUENJX0wxU1NfQ1RMMiwgY3RsMik7DQotDQotCS8qIFBy
b2dyYW0gQ29tbW9uX01vZGVfUmVzdG9yZV9UaW1lIGluIHVwc3RyZWFtIGRl
dmljZSAqLw0KLQlwY2lfY2xlYXJfYW5kX3NldF9jb25maWdfZHdvcmQocGFy
ZW50LCBwYXJlbnQtPmwxc3MgKyBQQ0lfTDFTU19DVEwxLA0KLQkJCQkgICAg
ICAgUENJX0wxU1NfQ1RMMV9DTV9SRVNUT1JFX1RJTUUsIGN0bDEpOw0KLQ0K
LQkvKiBQcm9ncmFtIExUUl9MMS4yX1RIUkVTSE9MRCB0aW1lIGluIGJvdGgg
cG9ydHMgKi8NCi0JcGNpX2NsZWFyX2FuZF9zZXRfY29uZmlnX2R3b3JkKHBh
cmVudCwgcGFyZW50LT5sMXNzICsgUENJX0wxU1NfQ1RMMSwNCi0JCQkJICAg
ICAgIFBDSV9MMVNTX0NUTDFfTFRSX0wxMl9USF9WQUxVRSB8DQotCQkJCSAg
ICAgICBQQ0lfTDFTU19DVEwxX0xUUl9MMTJfVEhfU0NBTEUsDQotCQkJCSAg
ICAgICBjdGwxKTsNCi0JcGNpX2NsZWFyX2FuZF9zZXRfY29uZmlnX2R3b3Jk
KGNoaWxkLCBjaGlsZC0+bDFzcyArIFBDSV9MMVNTX0NUTDEsDQotCQkJCSAg
ICAgICBQQ0lfTDFTU19DVEwxX0xUUl9MMTJfVEhfVkFMVUUgfA0KLQkJCQkg
ICAgICAgUENJX0wxU1NfQ1RMMV9MVFJfTDEyX1RIX1NDQUxFLA0KLQkJCQkg
ICAgICAgY3RsMSk7DQotDQotCWlmIChwbDFfMl9lbmFibGVzIHx8IGNsMV8y
X2VuYWJsZXMpIHsNCi0JCXBjaV9jbGVhcl9hbmRfc2V0X2NvbmZpZ19kd29y
ZChwYXJlbnQsDQotCQkJCQkgICAgICAgcGFyZW50LT5sMXNzICsgUENJX0wx
U1NfQ1RMMSwgMCwNCi0JCQkJCSAgICAgICBwbDFfMl9lbmFibGVzKTsNCi0J
CXBjaV9jbGVhcl9hbmRfc2V0X2NvbmZpZ19kd29yZChjaGlsZCwNCi0JCQkJ
CSAgICAgICBjaGlsZC0+bDFzcyArIFBDSV9MMVNTX0NUTDEsIDAsDQotCQkJ
CQkgICAgICAgY2wxXzJfZW5hYmxlcyk7DQotCX0NCisJcGN0bDEgJj0gfihQ
Q0lfTDFTU19DVEwxX0NNX1JFU1RPUkVfVElNRSB8DQorCQkgICBQQ0lfTDFT
U19DVEwxX0xUUl9MMTJfVEhfVkFMVUUgfA0KKwkJICAgUENJX0wxU1NfQ1RM
MV9MVFJfTDEyX1RIX1NDQUxFKTsNCisJcGN0bDEgfD0gKGN0bDEgJiAoUENJ
X0wxU1NfQ1RMMV9DTV9SRVNUT1JFX1RJTUUgfA0KKwkJCSAgUENJX0wxU1Nf
Q1RMMV9MVFJfTDEyX1RIX1ZBTFVFIHwNCisJCQkgIFBDSV9MMVNTX0NUTDFf
TFRSX0wxMl9USF9TQ0FMRSkpOw0KKwlhc3BtX3Byb2dyYW1fbDFzcyhwYXJl
bnQsIHBjdGwxLCBjdGwyKTsNCisNCisJY2N0bDEgJj0gfihQQ0lfTDFTU19D
VEwxX0NNX1JFU1RPUkVfVElNRSB8DQorCQkgICBQQ0lfTDFTU19DVEwxX0xU
Ul9MMTJfVEhfVkFMVUUgfA0KKwkJICAgUENJX0wxU1NfQ1RMMV9MVFJfTDEy
X1RIX1NDQUxFKTsNCisJY2N0bDEgfD0gKGN0bDEgJiAoUENJX0wxU1NfQ1RM
MV9DTV9SRVNUT1JFX1RJTUUgfA0KKwkJCSAgUENJX0wxU1NfQ1RMMV9MVFJf
TDEyX1RIX1ZBTFVFIHwNCisJCQkgIFBDSV9MMVNTX0NUTDFfTFRSX0wxMl9U
SF9TQ0FMRSkpOw0KKwlhc3BtX3Byb2dyYW1fbDFzcyhjaGlsZCwgY2N0bDEs
IGN0bDIpOw0KIH0NCiANCiBzdGF0aWMgdm9pZCBhc3BtX2wxc3NfaW5pdChz
dHJ1Y3QgcGNpZV9saW5rX3N0YXRlICpsaW5rKQ0KLS0gDQoyLjM0LjENCg0K

--8323329-1471136400-1710211022=:4781--

