Return-Path: <linux-pm-owner@vger.kernel.org>
X-Original-To: lists+linux-pm@lfdr.de
Delivered-To: lists+linux-pm@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id D08B91BF3E9
	for <lists+linux-pm@lfdr.de>; Thu, 30 Apr 2020 11:14:52 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726502AbgD3JOs (ORCPT <rfc822;lists+linux-pm@lfdr.de>);
        Thu, 30 Apr 2020 05:14:48 -0400
Received: from mailgw01.mediatek.com ([210.61.82.183]:49361 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1726391AbgD3JOs (ORCPT
        <rfc822;linux-pm@vger.kernel.org>); Thu, 30 Apr 2020 05:14:48 -0400
X-UUID: 393c66c19eb2460988ebf43377ba7058-20200430
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=FMiN3IO1GCMdXmYJ4tb+VErwGj8w9GUJT7bbTjKdszA=;
        b=qPYhWQ4gKPlwTqyXfbzZkBfWxCCXTZyl8tZWFb5NXiecU0KM1nmL21MDmR5eUS7LO7GNgEKwN6bCLxTdCe+79rUaCA0XAH1LyKYSXxHoZRADe0bpS/l96HkDob+HQni1WBiCWSbBT1tTjnvTScgHjGaAJsO/LZoYFgQuyat+PQg=;
X-UUID: 393c66c19eb2460988ebf43377ba7058-20200430
Received: from mtkcas07.mediatek.inc [(172.21.101.84)] by mailgw01.mediatek.com
        (envelope-from <henry.yen@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 696927261; Thu, 30 Apr 2020 17:14:42 +0800
Received: from mtkcas07.mediatek.inc (172.21.101.84) by
 mtkmbs05n2.mediatek.inc (172.21.101.140) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Thu, 30 Apr 2020 17:14:38 +0800
Received: from mtksdccf07.mediatek.inc (172.21.84.99) by mtkcas07.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Thu, 30 Apr 2020 17:14:41 +0800
From:   Henry Yen <henry.yen@mediatek.com>
To:     Zhang Rui <rui.zhang@intel.com>,
        Daniel Lezcano <daniel.lezcano@linaro.org>,
        Amit Kucheria <amit.kucheria@verdurent.com>,
        Matthias Brugger <matthias.bgg@gmail.com>
CC:     <linux-pm@vger.kernel.org>, <linux-arm-kernel@lists.infradead.org>,
        <linux-mediatek@lists.infradead.org>,
        <linux-kernel@vger.kernel.org>,
        Steven Liu <steven.liu@mediatek.com>,
        Henry Yen <henry.yen@mediatek.com>,
        Michael Kao <michael.kao@mediatek.com>
Subject: [PATCH v2 1/2] thermal: mediatek: prepare to add support for other platforms
Date:   Thu, 30 Apr 2020 17:14:33 +0800
Message-ID: <1588238074-19338-2-git-send-email-henry.yen@mediatek.com>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1588238074-19338-1-git-send-email-henry.yen@mediatek.com>
References: <1588238074-19338-1-git-send-email-henry.yen@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-pm-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-pm.vger.kernel.org>
X-Mailing-List: linux-pm@vger.kernel.org

SXQgaXMga25vd24gdGhhdCBNZWRpYXRlayBvd25zIHR3byB0aGVybWFsIHN5c3RlbXMsIHdoaWNo
IG9ubHkgZGlmZmVyDQppbiB0aGUgd2F5IG9mIHJlYWRpbmcgY2FsaWJyYXRpb24gZGF0YSBhbmQg
Y29udmVydGluZyB0ZW1wZXJhdHVyZS4NCk1UODE3MywgTVQ4MTgzLCBNVDI3MDEgYW5kIE1UMjcx
MiBiZWxvbmdzIHRvIHZlcnNpb24gMSB0aGVybWFsDQpzeXN0ZW0sIGFuZCBNVDc2MjIgYmVsb25n
cyB0byB2ZXJzaW9uIDIuDQoNCkluIG9yZGVyIHRvIGhhbmRsZSBib3RoIHN5c3RlbXMsIHRoZSBz
dWZmaXggX1YxIGlzIGFwcGVuZGVkIHRvIHRoZQ0KY3VycmVudCBjb2RlLCBhbmQgdGhlbiB0aGUg
c2Vjb25kIHBhdGNoIHdpbGwgYWRkIF9WMiBmdW5jdGlvbnMgd2l0aA0KdGhlIHNhbWUgcHVycG9z
ZSBidXQgZGlmZmVyZW50IGltcGxlbWVudGF0aW9uLg0KDQpTaWduZWQtb2ZmLWJ5OiBIZW5yeSBZ
ZW4gPGhlbnJ5LnllbkBtZWRpYXRlay5jb20+DQotLS0NCiBkcml2ZXJzL3RoZXJtYWwvbXRrX3Ro
ZXJtYWwuYyB8IDExNCArKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tDQogMSBmaWxl
IGNoYW5nZWQsIDYyIGluc2VydGlvbnMoKyksIDUyIGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy90aGVybWFsL210a190aGVybWFsLmMgYi9kcml2ZXJzL3RoZXJtYWwvbXRrX3Ro
ZXJtYWwuYw0KaW5kZXggNzZlMzA2MDNkNGQ1Li4xMDEwN2Q5ZDU2YTggMTAwNjQ0DQotLS0gYS9k
cml2ZXJzL3RoZXJtYWwvbXRrX3RoZXJtYWwuYw0KKysrIGIvZHJpdmVycy90aGVybWFsL210a190
aGVybWFsLmMNCkBAIC0xMjAsMTggKzEyMCwxOCBAQA0KICAqIE1UMjcwMSBoYXMgMyBzZW5zb3Jz
IGFuZCBuZWVkcyAzIFZUUyBjYWxpYnJhdGlvbiBkYXRhLg0KICAqIE1UMjcxMiBoYXMgNCBzZW5z
b3JzIGFuZCBuZWVkcyA0IFZUUyBjYWxpYnJhdGlvbiBkYXRhLg0KICAqLw0KLSNkZWZpbmUgQ0FM
SUJfQlVGMF9WQUxJRAkJQklUKDApDQotI2RlZmluZSBDQUxJQl9CVUYxX0FEQ19HRSh4KQkJKCgo
eCkgPj4gMjIpICYgMHgzZmYpDQotI2RlZmluZSBDQUxJQl9CVUYwX1ZUU19UUzEoeCkJCSgoKHgp
ID4+IDE3KSAmIDB4MWZmKQ0KLSNkZWZpbmUgQ0FMSUJfQlVGMF9WVFNfVFMyKHgpCQkoKCh4KSA+
PiA4KSAmIDB4MWZmKQ0KLSNkZWZpbmUgQ0FMSUJfQlVGMV9WVFNfVFMzKHgpCQkoKCh4KSA+PiAw
KSAmIDB4MWZmKQ0KLSNkZWZpbmUgQ0FMSUJfQlVGMl9WVFNfVFM0KHgpCQkoKCh4KSA+PiAyMykg
JiAweDFmZikNCi0jZGVmaW5lIENBTElCX0JVRjJfVlRTX1RTNSh4KQkJKCgoeCkgPj4gNSkgJiAw
eDFmZikNCi0jZGVmaW5lIENBTElCX0JVRjJfVlRTX1RTQUJCKHgpCQkoKCh4KSA+PiAxNCkgJiAw
eDFmZikNCi0jZGVmaW5lIENBTElCX0JVRjBfREVHQ19DQUxJKHgpCQkoKCh4KSA+PiAxKSAmIDB4
M2YpDQotI2RlZmluZSBDQUxJQl9CVUYwX09fU0xPUEUoeCkJCSgoKHgpID4+IDI2KSAmIDB4M2Yp
DQotI2RlZmluZSBDQUxJQl9CVUYwX09fU0xPUEVfU0lHTih4KQkoKCh4KSA+PiA3KSAmIDB4MSkN
Ci0jZGVmaW5lIENBTElCX0JVRjFfSUQoeCkJCSgoKHgpID4+IDkpICYgMHgxKQ0KKyNkZWZpbmUg
Q0FMSUJfQlVGMF9WQUxJRF9WMQkJQklUKDApDQorI2RlZmluZSBDQUxJQl9CVUYxX0FEQ19HRV9W
MSh4KQkJKCgoeCkgPj4gMjIpICYgMHgzZmYpDQorI2RlZmluZSBDQUxJQl9CVUYwX1ZUU19UUzFf
VjEoeCkJKCgoeCkgPj4gMTcpICYgMHgxZmYpDQorI2RlZmluZSBDQUxJQl9CVUYwX1ZUU19UUzJf
VjEoeCkJKCgoeCkgPj4gOCkgJiAweDFmZikNCisjZGVmaW5lIENBTElCX0JVRjFfVlRTX1RTM19W
MSh4KQkoKCh4KSA+PiAwKSAmIDB4MWZmKQ0KKyNkZWZpbmUgQ0FMSUJfQlVGMl9WVFNfVFM0X1Yx
KHgpCSgoKHgpID4+IDIzKSAmIDB4MWZmKQ0KKyNkZWZpbmUgQ0FMSUJfQlVGMl9WVFNfVFM1X1Yx
KHgpCSgoKHgpID4+IDUpICYgMHgxZmYpDQorI2RlZmluZSBDQUxJQl9CVUYyX1ZUU19UU0FCQl9W
MSh4KQkoKCh4KSA+PiAxNCkgJiAweDFmZikNCisjZGVmaW5lIENBTElCX0JVRjBfREVHQ19DQUxJ
X1YxKHgpCSgoKHgpID4+IDEpICYgMHgzZikNCisjZGVmaW5lIENBTElCX0JVRjBfT19TTE9QRV9W
MSh4KQkoKCh4KSA+PiAyNikgJiAweDNmKQ0KKyNkZWZpbmUgQ0FMSUJfQlVGMF9PX1NMT1BFX1NJ
R05fVjEoeCkJKCgoeCkgPj4gNykgJiAweDEpDQorI2RlZmluZSBDQUxJQl9CVUYxX0lEX1YxKHgp
CQkoKCh4KSA+PiA5KSAmIDB4MSkNCiANCiBlbnVtIHsNCiAJVlRTMSwNCkBAIC01MjUsNyArNTI1
LDcgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBtdGtfdGhlcm1hbF9kYXRhIG10ODE4M190aGVybWFs
X2RhdGEgPSB7DQogICogVGhpcyBjb252ZXJ0cyB0aGUgcmF3IEFEQyB2YWx1ZSB0byBtY2Vsc2l1
cyB1c2luZyB0aGUgU29DIHNwZWNpZmljDQogICogY2FsaWJyYXRpb24gY29uc3RhbnRzDQogICov
DQotc3RhdGljIGludCByYXdfdG9fbWNlbHNpdXMoc3RydWN0IG10a190aGVybWFsICptdCwgaW50
IHNlbnNubywgczMyIHJhdykNCitzdGF0aWMgaW50IHJhd190b19tY2Vsc2l1c192MShzdHJ1Y3Qg
bXRrX3RoZXJtYWwgKm10LCBpbnQgc2Vuc25vLCBzMzIgcmF3KQ0KIHsNCiAJczMyIHRtcDsNCiAN
CkBAIC01OTQsOSArNTk0LDkgQEAgc3RhdGljIGludCBtdGtfdGhlcm1hbF9iYW5rX3RlbXBlcmF0
dXJlKHN0cnVjdCBtdGtfdGhlcm1hbF9iYW5rICpiYW5rKQ0KIAkJcmF3ID0gcmVhZGwobXQtPnRo
ZXJtYWxfYmFzZSArDQogCQkJICAgIGNvbmYtPm1zcltjb25mLT5iYW5rX2RhdGFbYmFuay0+aWRd
LnNlbnNvcnNbaV1dKTsNCiANCi0JCXRlbXAgPSByYXdfdG9fbWNlbHNpdXMobXQsDQotCQkJCSAg
ICAgICBjb25mLT5iYW5rX2RhdGFbYmFuay0+aWRdLnNlbnNvcnNbaV0sDQotCQkJCSAgICAgICBy
YXcpOw0KKwkJdGVtcCA9IHJhd190b19tY2Vsc2l1c192MShtdCwNCisJCQkJCSAgY29uZi0+YmFu
a19kYXRhW2JhbmstPmlkXS5zZW5zb3JzW2ldLA0KKwkJCQkJICByYXcpOw0KIA0KIAkJLyoNCiAJ
CSAqIFRoZSBmaXJzdCByZWFkIG9mIGEgc2Vuc29yIG9mdGVuIGNvbnRhaW5zIHZlcnkgaGlnaCBi
b2d1cw0KQEAgLTc1OCw2ICs3NTgsNTEgQEAgc3RhdGljIHU2NCBvZl9nZXRfcGh5c19iYXNlKHN0
cnVjdCBkZXZpY2Vfbm9kZSAqbnApDQogCXJldHVybiBvZl90cmFuc2xhdGVfYWRkcmVzcyhucCwg
cmVnYWRkcl9wKTsNCiB9DQogDQorc3RhdGljIGludCBtdGtfdGhlcm1hbF9leHRyYWN0X2VmdXNl
X3YxKHN0cnVjdCBtdGtfdGhlcm1hbCAqbXQsIHUzMiAqYnVmKQ0KK3sNCisJaW50IGk7DQorDQor
CWlmICghKGJ1ZlswXSAmIENBTElCX0JVRjBfVkFMSURfVjEpKQ0KKwkJcmV0dXJuIC1FSU5WQUw7
DQorDQorCW10LT5hZGNfZ2UgPSBDQUxJQl9CVUYxX0FEQ19HRV9WMShidWZbMV0pOw0KKw0KKwlm
b3IgKGkgPSAwOyBpIDwgbXQtPmNvbmYtPm51bV9zZW5zb3JzOyBpKyspIHsNCisJCXN3aXRjaCAo
bXQtPmNvbmYtPnZ0c19pbmRleFtpXSkgew0KKwkJY2FzZSBWVFMxOg0KKwkJCW10LT52dHNbVlRT
MV0gPSBDQUxJQl9CVUYwX1ZUU19UUzFfVjEoYnVmWzBdKTsNCisJCQlicmVhazsNCisJCWNhc2Ug
VlRTMjoNCisJCQltdC0+dnRzW1ZUUzJdID0gQ0FMSUJfQlVGMF9WVFNfVFMyX1YxKGJ1ZlswXSk7
DQorCQkJYnJlYWs7DQorCQljYXNlIFZUUzM6DQorCQkJbXQtPnZ0c1tWVFMzXSA9IENBTElCX0JV
RjFfVlRTX1RTM19WMShidWZbMV0pOw0KKwkJCWJyZWFrOw0KKwkJY2FzZSBWVFM0Og0KKwkJCW10
LT52dHNbVlRTNF0gPSBDQUxJQl9CVUYyX1ZUU19UUzRfVjEoYnVmWzJdKTsNCisJCQlicmVhazsN
CisJCWNhc2UgVlRTNToNCisJCQltdC0+dnRzW1ZUUzVdID0gQ0FMSUJfQlVGMl9WVFNfVFM1X1Yx
KGJ1ZlsyXSk7DQorCQkJYnJlYWs7DQorCQljYXNlIFZUU0FCQjoNCisJCQltdC0+dnRzW1ZUU0FC
Ql0gPQ0KKwkJCQlDQUxJQl9CVUYyX1ZUU19UU0FCQl9WMShidWZbMl0pOw0KKwkJCWJyZWFrOw0K
KwkJZGVmYXVsdDoNCisJCQlicmVhazsNCisJCX0NCisJfQ0KKw0KKwltdC0+ZGVnY19jYWxpID0g
Q0FMSUJfQlVGMF9ERUdDX0NBTElfVjEoYnVmWzBdKTsNCisJaWYgKENBTElCX0JVRjFfSURfVjEo
YnVmWzFdKSAmDQorCSAgICBDQUxJQl9CVUYwX09fU0xPUEVfU0lHTl9WMShidWZbMF0pKQ0KKwkJ
bXQtPm9fc2xvcGUgPSAtQ0FMSUJfQlVGMF9PX1NMT1BFX1YxKGJ1ZlswXSk7DQorCWVsc2UNCisJ
CW10LT5vX3Nsb3BlID0gQ0FMSUJfQlVGMF9PX1NMT1BFX1YxKGJ1ZlswXSk7DQorDQorCXJldHVy
biAwOw0KK30NCisNCiBzdGF0aWMgaW50IG10a190aGVybWFsX2dldF9jYWxpYnJhdGlvbl9kYXRh
KHN0cnVjdCBkZXZpY2UgKmRldiwNCiAJCQkJCSAgICBzdHJ1Y3QgbXRrX3RoZXJtYWwgKm10KQ0K
IHsNCkBAIC03OTMsNDMgKzgzOCw4IEBAIHN0YXRpYyBpbnQgbXRrX3RoZXJtYWxfZ2V0X2NhbGli
cmF0aW9uX2RhdGEoc3RydWN0IGRldmljZSAqZGV2LA0KIAkJZ290byBvdXQ7DQogCX0NCiANCi0J
aWYgKGJ1ZlswXSAmIENBTElCX0JVRjBfVkFMSUQpIHsNCi0JCW10LT5hZGNfZ2UgPSBDQUxJQl9C
VUYxX0FEQ19HRShidWZbMV0pOw0KLQ0KLQkJZm9yIChpID0gMDsgaSA8IG10LT5jb25mLT5udW1f
c2Vuc29yczsgaSsrKSB7DQotCQkJc3dpdGNoIChtdC0+Y29uZi0+dnRzX2luZGV4W2ldKSB7DQot
CQkJY2FzZSBWVFMxOg0KLQkJCQltdC0+dnRzW1ZUUzFdID0gQ0FMSUJfQlVGMF9WVFNfVFMxKGJ1
ZlswXSk7DQotCQkJCWJyZWFrOw0KLQkJCWNhc2UgVlRTMjoNCi0JCQkJbXQtPnZ0c1tWVFMyXSA9
IENBTElCX0JVRjBfVlRTX1RTMihidWZbMF0pOw0KLQkJCQlicmVhazsNCi0JCQljYXNlIFZUUzM6
DQotCQkJCW10LT52dHNbVlRTM10gPSBDQUxJQl9CVUYxX1ZUU19UUzMoYnVmWzFdKTsNCi0JCQkJ
YnJlYWs7DQotCQkJY2FzZSBWVFM0Og0KLQkJCQltdC0+dnRzW1ZUUzRdID0gQ0FMSUJfQlVGMl9W
VFNfVFM0KGJ1ZlsyXSk7DQotCQkJCWJyZWFrOw0KLQkJCWNhc2UgVlRTNToNCi0JCQkJbXQtPnZ0
c1tWVFM1XSA9IENBTElCX0JVRjJfVlRTX1RTNShidWZbMl0pOw0KLQkJCQlicmVhazsNCi0JCQlj
YXNlIFZUU0FCQjoNCi0JCQkJbXQtPnZ0c1tWVFNBQkJdID0gQ0FMSUJfQlVGMl9WVFNfVFNBQkIo
YnVmWzJdKTsNCi0JCQkJYnJlYWs7DQotCQkJZGVmYXVsdDoNCi0JCQkJYnJlYWs7DQotCQkJfQ0K
LQkJfQ0KLQ0KLQkJbXQtPmRlZ2NfY2FsaSA9IENBTElCX0JVRjBfREVHQ19DQUxJKGJ1ZlswXSk7
DQotCQlpZiAoQ0FMSUJfQlVGMV9JRChidWZbMV0pICYNCi0JCSAgICBDQUxJQl9CVUYwX09fU0xP
UEVfU0lHTihidWZbMF0pKQ0KLQkJCW10LT5vX3Nsb3BlID0gLUNBTElCX0JVRjBfT19TTE9QRShi
dWZbMF0pOw0KLQkJZWxzZQ0KLQkJCW10LT5vX3Nsb3BlID0gQ0FMSUJfQlVGMF9PX1NMT1BFKGJ1
ZlswXSk7DQotCX0gZWxzZSB7DQorCWlmIChtdGtfdGhlcm1hbF9leHRyYWN0X2VmdXNlX3YxKG10
LCBidWYpKQ0KIAkJZGV2X2luZm8oZGV2LCAiRGV2aWNlIG5vdCBjYWxpYnJhdGVkLCB1c2luZyBk
ZWZhdWx0IGNhbGlicmF0aW9uIHZhbHVlc1xuIik7DQotCX0NCiANCiBvdXQ6DQogCWtmcmVlKGJ1
Zik7DQotLSANCjIuMTcuMQ0K

