Return-Path: <linux-pm-owner@vger.kernel.org>
X-Original-To: lists+linux-pm@lfdr.de
Delivered-To: lists+linux-pm@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 264D41CDD63
	for <lists+linux-pm@lfdr.de>; Mon, 11 May 2020 16:38:58 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726173AbgEKOi5 (ORCPT <rfc822;lists+linux-pm@lfdr.de>);
        Mon, 11 May 2020 10:38:57 -0400
Received: from lelv0142.ext.ti.com ([198.47.23.249]:47320 "EHLO
        lelv0142.ext.ti.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1725993AbgEKOi4 (ORCPT
        <rfc822;linux-pm@vger.kernel.org>); Mon, 11 May 2020 10:38:56 -0400
Received: from lelv0265.itg.ti.com ([10.180.67.224])
        by lelv0142.ext.ti.com (8.15.2/8.15.2) with ESMTP id 04BEcqdn020841;
        Mon, 11 May 2020 09:38:52 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ti.com;
        s=ti-com-17Q1; t=1589207933;
        bh=LLcnPcpO+fMJxDnHgxDEXH+kv7LMIDVvPCuMDORaRes=;
        h=Subject:To:CC:References:From:Date:In-Reply-To;
        b=esoCKmKZltbLxkyFb5JQYrktm+YvCneNknumS0BkBsu8GUTMRGCrgwULYZV9tcTtQ
         abJyC9Cec+K68148V7ihvT+zv1m2YaPQx70XA0jeNBl2cVTPiUNIbOTGWP0ViLjpAn
         q6bNN/rrFM05S1hxrUAg94ntkP9bwitLjHdCeLBc=
Received: from DLEE109.ent.ti.com (dlee109.ent.ti.com [157.170.170.41])
        by lelv0265.itg.ti.com (8.15.2/8.15.2) with ESMTPS id 04BEcqOi079483
        (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=FAIL);
        Mon, 11 May 2020 09:38:52 -0500
Received: from DLEE101.ent.ti.com (157.170.170.31) by DLEE109.ent.ti.com
 (157.170.170.41) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1979.3; Mon, 11
 May 2020 09:38:52 -0500
Received: from lelv0327.itg.ti.com (10.180.67.183) by DLEE101.ent.ti.com
 (157.170.170.31) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1979.3 via
 Frontend Transport; Mon, 11 May 2020 09:38:52 -0500
Received: from [10.250.65.13] (ileax41-snat.itg.ti.com [10.172.224.153])
        by lelv0327.itg.ti.com (8.15.2/8.15.2) with ESMTP id 04BEcpBq066742;
        Mon, 11 May 2020 09:38:52 -0500
Subject: Re: [PATCH v2] dt-bindings: power: Convert bq27xxx dt to yaml
To:     Sebastian Reichel <sebastian.reichel@collabora.com>
CC:     <linux-pm@vger.kernel.org>, <robh@kernel.org>,
        <linux-kernel@vger.kernel.org>, <devicetree@vger.kernel.org>,
        =?UTF-8?Q?Pali_Roh=c3=a1r?= <pali@kernel.org>,
        "Andrew F . Davis" <afd@ti.com>
References: <20200507183013.27261-1-dmurphy@ti.com>
 <20200510161721.257vprq6rqp64wu5@earth.universe>
 <fb9b240e-9bfe-1295-6fc4-700d886ea7c9@ti.com>
 <20200511143241.nmkti7meahvj2swt@earth.universe>
From:   Dan Murphy <dmurphy@ti.com>
Message-ID: <8674289c-038d-d811-4786-322d66072527@ti.com>
Date:   Mon, 11 May 2020 09:29:59 -0500
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101
 Thunderbird/68.7.0
MIME-Version: 1.0
In-Reply-To: <20200511143241.nmkti7meahvj2swt@earth.universe>
Content-Type: text/plain; charset="windows-1252"; format=flowed
Content-Transfer-Encoding: 8bit
Content-Language: en-US
X-EXCLAIMER-MD-CONFIG: e1e8a2fd-e40a-4ac6-ac9b-f7e9cc9ee180
Sender: linux-pm-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-pm.vger.kernel.org>
X-Mailing-List: linux-pm@vger.kernel.org

Sebastian

On 5/11/20 9:32 AM, Sebastian Reichel wrote:
> Hi,
>
> On Mon, May 11, 2020 at 07:25:06AM -0500, Dan Murphy wrote:
>> On 5/10/20 11:17 AM, Sebastian Reichel wrote:
>>> This needs is missing the power-supplies property. The N900 DT
>>> contains a bq27200 referencing the charger, so it should fail the DT
>>> check without the property being listed here.
>> Hmm.  I ran the dt checker specifically on the binding and it did not fail.
>> Unless I need to build some other DTs as well.
>> Either I will have the power-supplies property
> I just tried it myself. The problem is the way you are specifying
> the compatible strings. This is the parsing result:
>
> enum: ['ti,bq27200 - BQ27200', 'ti,bq27210 - BQ27210', 'ti,bq27500 - deprecated,
>        use revision specific property below', ...
>
> You can see this in Documentation/devicetree/bindings/processed-schema.yaml, which
> is generated by running the check. The compatible comments need a # as separation
> character like this to generate proper bindings:
>
> properties:
>    compatible:
>      enum:
>        - ti,bq27200 # BQ27200
>        - ti,bq27210 # BQ27210
>        - ti,bq27500 # deprecated, use revision specific property below

Well honestly not sure why we need the comment either.   These are 
pretty self explanatory maybe we should just remove the additional comments

Any consideration on just removing the deprecated values?

Dan

>
> -- Sebastian
